{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * @description 九宫格数组其中除开点击的[0,0]坐标以外的八个格子\n * @type {number[][]}\n */\nconst posArr = [[-1, -1], [-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1]];\n\n/**\n * @description 格子属性\n */\nclass Cell {\n  constructor(row, col) {\n    this.row = row;\n    this.col = col;\n    /**\n     * @des 隐藏状态\n     * @type {boolean}\n     */\n    this.isVisited = false;\n    /**\n     * @des 插旗\n     * @type {boolean}\n     */\n    this.isFlagged = false;\n    this.cell = '';\n    this.val = 0;\n    this.neighbors = [];\n  }\n}\nexport default {\n  name: 'App',\n  components: {\n    // MineClearing\n  },\n  data() {\n    return {\n      /**\n       * @description 每一局游戏第一次点击格子\n       */\n      isFirstClick: true,\n      /**\n       * @description 数组\n       */\n      mines: [],\n      /**\n       * @description 格子数组\n       */\n      cellMatrix: null,\n      /**\n       * @description 每一局游戏第一次点击格子\n       */\n      isGameOver: false,\n      /**\n       * @description 行数\n       */\n      rowSize: 8,\n      /**\n       * @description 列数\n       */\n      colSize: 8,\n      /**\n       * @description 地雷数量\n       */\n      mineSize: 9,\n      /**\n       * @description 剩余地雷\n       */\n      remainMines: '',\n      /**\n       * @description 安全格子数量\n       */\n      noMineBlocks: '',\n      /**\n       * @description 计时累加\n       */\n      time: 0.0,\n      /**\n       * @description 计时\n       */\n      timer: '',\n      /**\n       * @description 按键\n       */\n      btnContent: 'Start',\n      /**\n       * @description 难度\n       */\n      difficulty: 'easy'\n    };\n  },\n  mounted() {\n    // 初始化游戏\n    console.log('-----------------------');\n    console.log('初始化游戏中...');\n    this.initGame();\n    console.log('游戏初始化完成');\n    console.log('-----------------------');\n  },\n  methods: {\n    /**\n     * @description 获取格子\n     * @param r\n     * @param c\n     * @returns {*}\n     */\n    getCell(r, c) {\n      /* 为了解放双手 */\n      return this.cellMatrix[r][c];\n    },\n    /**\n     * @description 第一次点击格子\n     * @param cell 点击的X坐标\n     */\n    clickCell(cell) {\n      if (cell.isVisited || cell.isFlagged || this.isGameOver) {\n        return;\n      }\n      if (this.isFirstClick) {\n        this.noMineBlocks = this.colSize * this.rowSize - this.mineSize;\n        this.initMines(cell.row, cell.col);\n        this.timeStart();\n      }\n      cell.isVisited = true;\n      if (cell.val === -1) {\n        // 踩雷了，爆炸\n        cell.isClickedBoom = true;\n        this.fail();\n        return;\n      }\n      if (cell.val === 0) {\n        // 踩空了\n        this.search(cell);\n      } else {\n        cell.cell = cell.val;\n      }\n\n      // 注意这个，判断胜利的位置放到了最后\n      if (--this.noMineBlocks === 0) {\n        this.success();\n      }\n    },\n    /**\n     * @description 踩空后进行搜索，查询周围格子数字\n     * @param cell\n     */\n    search(cell) {\n      /* 因为有了 neighbors，代码简化了许多 */\n      cell.neighbors.forEach(neighbor => {\n        this.clickCell(neighbor);\n      });\n    },\n    /**\n     * @description 失败结局\n     */\n    fail() {\n      this.gameover();\n      this.btnContent = 'BadEnding';\n      this.showMines(false);\n    },\n    /**\n     * @description 胜利结局\n     */\n    success() {\n      this.gameover();\n      this.btnContent = 'HappyEnding';\n      this.showMines(true);\n    },\n    /**\n     * @description 游戏结束\n     */\n    gameover() {\n      this.timeStop();\n      this.isGameOver = true;\n    },\n    /**\n     * @description 结束时显示地雷\n     * @param isSuccess 是否成功\n     */\n    showMines(isSuccess) {\n      this.mines.forEach(cell => {\n        if (isSuccess) {\n          // cell.isFlagged = true;\n          // cell.val = -2\n          if (!cell.isFlagged) {\n            console.log('flag');\n            this.setFlag(cell);\n          }\n        } else {\n          // if (!cell.isFlagged) cell.isVisited = true;\n          // cell.isVisited = true\n          if (!cell.isFlagged) cell.isVisited = true;\n        }\n      });\n    },\n    /**\n     * @description 重新开始\n     */\n    onRestartBtnClick() {\n      this.btnContent = 'Start';\n      this.restart();\n    },\n    /**\n     * @description 重新开始\n     */\n    restart() {\n      console.log('重新开始');\n      this.timeStop();\n      this.initGame();\n    },\n    /**\n     * @description 初始化游戏\n     */\n    initGame() {\n      this.isFirstClick = true;\n      this.isGameOver = false;\n      if (this.timer) {\n        this.timeStop();\n      }\n      this.mines = [];\n      this.timer = '';\n      this.time = 0.0;\n      this.remainMines = this.mineSize;\n\n      // 初始化二维数组\n      this.cellMatrix = [];\n      for (let row = 0; row < this.rowSize; row++) {\n        this.cellMatrix.push([]);\n        for (let col = 0; col < this.colSize; col++) {\n          this.cellMatrix[row].push(new Cell(row, col));\n        }\n      }\n      console.log('this.cellMatrix', this.cellMatrix);\n      // 把 '邻居们' 存进来\n      this.cellMatrix.forEach(rowArr => {\n        console.log('rowArr', rowArr);\n        rowArr.forEach(cell => {\n          posArr.forEach(p => {\n            const x = p[0] + cell.row;\n            const y = p[1] + cell.col;\n            if (x >= 0 && x < this.rowSize && y >= 0 && y < this.colSize) {\n              const cellNeighbors = [];\n              cellNeighbors.push(this.getCell(x, y));\n              cell.neighbors = JSON.parse(JSON.stringify(cellNeighbors));\n            }\n          });\n        });\n      });\n    },\n    /**\n     * @description  传入第一次点击的坐标\n     * @param row 第一次点击的X坐标\n     * @param col 第一次点击的Y坐标\n     */\n    initMines(row, col) {\n      console.log('-----------------------');\n      console.log('初始化地雷...');\n\n      // 地雷设为 -1\n      for (let i = 0; i < this.mineSize; i++) {\n        do {\n          var mineRow = Math.floor(Math.random() * this.rowSize);\n          var mineCol = Math.floor(Math.random() * this.colSize);\n        } while (mineRow === row && mineCol === col || this.getCell(mineRow, mineCol).val === -1);\n        this.getCell(mineRow, mineCol).val = -1;\n        this.mines.push(this.getCell(mineRow, mineCol));\n      }\n      // 初始化数字\n      this.initNum();\n      console.log('初始化地雷完成...');\n      console.log('-----------------------');\n      this.isFirstClick = false;\n      this.cellMatrix.forEach(rowArr => {\n        rowArr.forEach(cell => {\n          if (cell.val === -1) {\n            cell.neighbors.forEach(neighbor => {\n              if (neighbor.val !== -1) {\n                neighbor.val++;\n              }\n            });\n          }\n        });\n      });\n      this.isFirstClick = false;\n    },\n    /**\n     * @description 初始化数字\n     */\n    initNum() {\n      console.log('初始化数字...');\n      this.cellMatrix.forEach(rowArr => {\n        rowArr.forEach(cell => {\n          if (cell.val === -1) {\n            cell.neighbors.forEach(neighbor => {\n              if (neighbor.val !== -1) {\n                neighbor.val++;\n              }\n            });\n          }\n        });\n      });\n    },\n    /**\n     * @description 插旗\n     */\n    setFlag(cell) {\n      cell.isFlagged = !cell.isFlagged;\n      if (cell.isFlagged) {\n        this.remainMines--;\n      } else {\n        this.remainMines++;\n      }\n    },\n    /**\n     * @description 计时开始\n     */\n    timeStart() {\n      this.timer = setInterval(() => {\n        this.time += 0.1;\n      }, 100);\n    },\n    /**\n     * @description 计时停止\n     */\n    timeStop() {\n      clearInterval(this.timer);\n    },\n    /**\n     * @description 选择难度\n     */\n    changeDifficulty() {\n      switch (this.difficulty) {\n        case 'easy':\n          {\n            this.rowSize = 8;\n            this.colSize = 8;\n            this.mineSize = 10;\n            break;\n          }\n        case 'normal':\n          {\n            this.rowSize = 16;\n            this.colSize = 16;\n            this.mineSize = 40;\n            break;\n          }\n        case 'hard':\n          {\n            this.rowSize = 16;\n            this.colSize = 30;\n            this.mineSize = 99;\n            break;\n          }\n      }\n      this.initGame();\n    },\n    mousedown(e, cell) {\n      if (e.button === 2) {\n        if (!cell.isVisited) this.setFlag(cell);\n        cell.isRightPress = true;\n      } else if (e.button === 0) {\n        cell.isLeftPress = true;\n        cell.isReady = true;\n      }\n      // 同时按下\n      if (cell.isRightPress && cell.isLeftPress) {\n        cell.neighbors.forEach(neighbor => {\n          if (!neighbor.isFlagged) neighbor.isReady = true;\n        });\n        cell.isReady = true;\n        return;\n      }\n\n      // console.log(e.button);\n      this.emojiType = 'click';\n    },\n    mouseup(e, cell) {\n      this.emojiType = 'default';\n      // let clear = false\n\n      // 同时按下后，有一个松开\n      if (cell.isLeftPress && cell.isRightPress) {\n        if (cell.val > 0 && cell.isVisited) {\n          const unVisitedCells = [];\n          let flags = 0;\n          cell.neighbors.forEach(neighbor => {\n            if (neighbor.isFlagged) {\n              // console.log(neighbor)\n              flags++;\n            }\n            if (!neighbor.isVisited && !neighbor.isFlagged) {\n              unVisitedCells.push(neighbor);\n            }\n          });\n          const mines = [];\n          if (flags === cell.val) {\n            unVisitedCells.forEach(c => {\n              if (c.val === -1) {\n                mines.push(c);\n              } else {\n                this.clickCell(c);\n              }\n            });\n          }\n          if (mines.length > 0) {\n            mines.forEach(mine => {\n              mine.isVisited = true;\n              mine.isClickedBoom = true;\n            });\n            this.fail();\n          }\n        }\n      }\n      cell.neighbors.forEach(neighbor => {\n        neighbor.isReady = false;\n      });\n      if (e.button === 2) {\n        cell.isRightPress = false;\n      } else if (e.button === 0) {\n        cell.isLeftPress = false;\n      }\n    },\n    mouseleave(cell) {\n      if (cell.isReady) {\n        cell.isReady = false;\n      }\n    }\n  },\n  filters: {\n    /**\n     * @description  时间过滤\n     * @param val\n     * @returns {string}\n     */\n    timeFilter(val) {\n      return Number(val).toFixed(1);\n    },\n    /**\n     * @description 设置空格\n     * @param val 格子数字\n     * @returns {string|*}\n     */\n    cellFilter(val) {\n      return val === 0 ? '' : val;\n    }\n  }\n};","map":{"version":3,"mappings":";AAuCA;AACA;AACA;AACA;AACA,gBACA,UACA,SACA,SACA,QACA,QACA,QACA,SACA,QACA;;AAEA;AACA;AACA;AACA;EACAA;IACA;IACA;IACA;AACA;AACA;AACA;IACA;IACA;AACA;AACA;AACA;IACA;IACA;IACA;IACA;EACA;AACA;AAEA;EACAC;EACAC;IACA;EAAA,CACA;EACAC;IACA;MACA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;MAEA;AACA;AACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;IACAA;IAEA;IAEAA;IACAA;EACA;EACAC;IACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MACA;QACA;MACA;MAEA;QACA;QACA;QACA;MACA;MAEAC;MAEA;QACA;QACAA;QACA;QACA;MACA;MAEA;QACA;QACA;MACA;QACAA;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MACA;MACAD;QACA;MACA;IACA;IAEA;AACA;AACA;IACAE;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MACA;QACA;UACA;UACA;UACA;YACAT;YACA;UACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAU;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACAX;MACA;MACA;IACA;IACA;AACA;AACA;IACAY;MACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;QACA;QACA;UACA;QACA;MACA;MACAZ;MACA;MACA;QACAA;QACAa;UACAC;YACA;YACA;YACA;cACA;cACAC;cACAX;YACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;IACAY;MACAhB;MACAA;;MAEA;MACA;QACA;UACA;UACA;QACA,SACAiB,sCACA;QAEA;QACA;MACA;MACA;MACA;MACAjB;MACAA;MACA;MAEA;QACAa;UACA;YACAT;cACA;gBACAc;cACA;YACA;UACA;QACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACAnB;MAEA;QACAa;UACA;YACAT;cACA;gBACAc;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAE;MACAhB;MACA;QACA;MACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAiB;MACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACAC;IACA;IACA;AACA;AACA;IACAC;MACA;QACA;UAAA;YACA;YACA;YACA;YACA;UACA;QACA;UAAA;YACA;YACA;YACA;YACA;UACA;QACA;UAAA;YACA;YACA;YACA;YACA;UACA;MAAA;MAEA;IACA;IACAC;MACA;QACA;QACArB;MACA;QACAA;QACAA;MACA;MACA;MACA;QACAA;UACA;QACA;QACAA;QACA;MACA;;MAEA;MACA;IACA;IACAsB;MACA;MACA;;MAEA;MACA;QACA;UACA;UACA;UAEAtB;YACA;cACA;cACAuB;YACA;YACA;cACAC;YACA;UACA;UAEA;UACA;YACAA;cACA;gBACAzC;cACA;gBACA;cACA;YACA;UACA;UACA;YACAA;cACA0C;cACAA;YACA;YACA;UACA;QACA;MACA;MACAzB;QACAc;MACA;MAEA;QACAd;MACA;QACAA;MACA;IACA;IACA0B;MACA;QACA1B;MACA;IACA;EACA;EACA2B;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;IACAC;MACA;IACA;EACA;AAEA","names":["constructor","name","components","data","isFirstClick","mines","cellMatrix","isGameOver","rowSize","colSize","mineSize","remainMines","noMineBlocks","time","timer","btnContent","difficulty","mounted","console","methods","getCell","clickCell","cell","search","fail","success","gameover","showMines","onRestartBtnClick","restart","initGame","rowArr","posArr","cellNeighbors","initMines","mineRow","neighbor","initNum","setFlag","timeStart","timeStop","clearInterval","changeDifficulty","mousedown","mouseup","flags","unVisitedCells","mine","mouseleave","filters","timeFilter","cellFilter"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"main-area\">\n\n      <div style=\"text-align:center\" class=\"top-box\">\n        <div class=\"top-box-item remain-mines show-number\">\n          {{ remainMines }}\n        </div>\n        <button @click=\"onRestartBtnClick\" class=\"restart-btn top-box-item\">\n          {{ btnContent }}\n        </button>\n        <div class=\"top-box-item time show-number\"> {{ time | timeFilter }}</div>\n      </div>\n      <div class=\"game-area\">\n        <div v-for=\"(rowArr) in cellMatrix\"\n             :key=\"cellMatrix[rowArr]\"\n             class=\"row-cells\">\n          <div v-for=\"(cell) in rowArr\"\n               :key=\"rowArr[cell]\"\n               class=\"cell\"\n               @click=\"clickCell(cell)\"\n               @mouseup=\"mouseup($event, cell)\"\n               @contextmenu.prevent\n               @mouseleave=\"mouseleave(cell)\"\n          >\n            {{ cell.val }}\n            <div :class=\"['num-color-'+cell.val, 'num-color' ]\">\n              {{ cell.cell | cellFilter }}\n            </div>\n            <div :class=\"['mask', {visited: cell.isVisited}]\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n/**\n * @description 九宫格数组其中除开点击的[0,0]坐标以外的八个格子\n * @type {number[][]}\n */\nconst posArr = [\n  [-1, -1],\n  [-1, 0],\n  [-1, 1],\n  [0, 1],\n  [1, 1],\n  [1, 0],\n  [1, -1],\n  [0, -1]\n]\n\n/**\n * @description 格子属性\n */\nclass Cell {\n  constructor (row, col) {\n    this.row = row\n    this.col = col\n    /**\n     * @des 隐藏状态\n     * @type {boolean}\n     */\n    this.isVisited = false\n    /**\n     * @des 插旗\n     * @type {boolean}\n     */\n    this.isFlagged = false\n    this.cell = ''\n    this.val = 0\n    this.neighbors = []\n  }\n}\n\nexport default {\n  name: 'App',\n  components: {\n    // MineClearing\n  },\n  data () {\n    return {\n      /**\n       * @description 每一局游戏第一次点击格子\n       */\n      isFirstClick: true,\n\n      /**\n       * @description 数组\n       */\n      mines: [],\n\n      /**\n       * @description 格子数组\n       */\n      cellMatrix: null,\n\n      /**\n       * @description 每一局游戏第一次点击格子\n       */\n      isGameOver: false,\n\n      /**\n       * @description 行数\n       */\n      rowSize: 8,\n\n      /**\n       * @description 列数\n       */\n      colSize: 8,\n\n      /**\n       * @description 地雷数量\n       */\n      mineSize: 9,\n\n      /**\n       * @description 剩余地雷\n       */\n      remainMines: '',\n\n      /**\n       * @description 安全格子数量\n       */\n      noMineBlocks: '',\n\n      /**\n       * @description 计时累加\n       */\n      time: 0.0,\n\n      /**\n       * @description 计时\n       */\n      timer: '',\n\n      /**\n       * @description 按键\n       */\n      btnContent: 'Start',\n\n      /**\n       * @description 难度\n       */\n      difficulty: 'easy'\n    }\n  },\n  mounted () {\n    // 初始化游戏\n    console.log('-----------------------')\n    console.log('初始化游戏中...')\n\n    this.initGame()\n\n    console.log('游戏初始化完成')\n    console.log('-----------------------')\n  },\n  methods: {\n    /**\n     * @description 获取格子\n     * @param r\n     * @param c\n     * @returns {*}\n     */\n    getCell (r, c) {\n      /* 为了解放双手 */\n      return this.cellMatrix[r][c]\n    },\n\n    /**\n     * @description 第一次点击格子\n     * @param cell 点击的X坐标\n     */\n    clickCell (cell) {\n      if (cell.isVisited || cell.isFlagged || this.isGameOver) {\n        return\n      }\n\n      if (this.isFirstClick) {\n        this.noMineBlocks = this.colSize * this.rowSize - this.mineSize\n        this.initMines(cell.row, cell.col)\n        this.timeStart()\n      }\n\n      cell.isVisited = true\n\n      if (cell.val === -1) {\n        // 踩雷了，爆炸\n        cell.isClickedBoom = true\n        this.fail()\n        return\n      }\n\n      if (cell.val === 0) {\n        // 踩空了\n        this.search(cell)\n      } else {\n        cell.cell = cell.val\n      }\n\n      // 注意这个，判断胜利的位置放到了最后\n      if (--this.noMineBlocks === 0) {\n        this.success()\n      }\n    },\n\n    /**\n     * @description 踩空后进行搜索，查询周围格子数字\n     * @param cell\n     */\n    search (cell) {\n      /* 因为有了 neighbors，代码简化了许多 */\n      cell.neighbors.forEach((neighbor) => {\n        this.clickCell(neighbor)\n      })\n    },\n\n    /**\n     * @description 失败结局\n     */\n    fail () {\n      this.gameover()\n      this.btnContent = 'BadEnding'\n      this.showMines(false)\n    },\n\n    /**\n     * @description 胜利结局\n     */\n    success () {\n      this.gameover()\n      this.btnContent = 'HappyEnding'\n      this.showMines(true)\n    },\n\n    /**\n     * @description 游戏结束\n     */\n    gameover () {\n      this.timeStop()\n      this.isGameOver = true\n    },\n\n    /**\n     * @description 结束时显示地雷\n     * @param isSuccess 是否成功\n     */\n    showMines (isSuccess) {\n      this.mines.forEach((cell) => {\n        if (isSuccess) {\n          // cell.isFlagged = true;\n          // cell.val = -2\n          if (!cell.isFlagged) {\n            console.log('flag')\n            this.setFlag(cell)\n          }\n        } else {\n          // if (!cell.isFlagged) cell.isVisited = true;\n          // cell.isVisited = true\n          if (!cell.isFlagged) cell.isVisited = true\n        }\n      })\n    },\n\n    /**\n     * @description 重新开始\n     */\n    onRestartBtnClick () {\n      this.btnContent = 'Start'\n      this.restart()\n    },\n\n    /**\n     * @description 重新开始\n     */\n    restart () {\n      console.log('重新开始')\n      this.timeStop()\n      this.initGame()\n    },\n    /**\n     * @description 初始化游戏\n     */\n    initGame () {\n      this.isFirstClick = true\n      this.isGameOver = false\n      if (this.timer) {\n        this.timeStop()\n      }\n      this.mines = []\n      this.timer = ''\n      this.time = 0.0\n      this.remainMines = this.mineSize\n\n      // 初始化二维数组\n      this.cellMatrix = []\n      for (let row = 0; row < this.rowSize; row++) {\n        this.cellMatrix.push([])\n        for (let col = 0; col < this.colSize; col++) {\n          this.cellMatrix[row].push(new Cell(row, col))\n        }\n      }\n      console.log('this.cellMatrix', this.cellMatrix)\n      // 把 '邻居们' 存进来\n      this.cellMatrix.forEach((rowArr) => {\n        console.log('rowArr', rowArr)\n        rowArr.forEach((cell) => {\n          posArr.forEach((p) => {\n            const x = p[0] + cell.row\n            const y = p[1] + cell.col\n            if (x >= 0 && x < this.rowSize && y >= 0 && y < this.colSize) {\n              const cellNeighbors = []\n              cellNeighbors.push(this.getCell(x, y))\n              cell.neighbors = JSON.parse(JSON.stringify(cellNeighbors))\n            }\n          })\n        })\n      })\n    },\n\n    /**\n     * @description  传入第一次点击的坐标\n     * @param row 第一次点击的X坐标\n     * @param col 第一次点击的Y坐标\n     */\n    initMines (row, col) {\n      console.log('-----------------------')\n      console.log('初始化地雷...')\n\n      // 地雷设为 -1\n      for (let i = 0; i < this.mineSize; i++) {\n        do {\n          var mineRow = Math.floor(Math.random() * this.rowSize)\n          var mineCol = Math.floor(Math.random() * this.colSize)\n        } while (\n          (mineRow === row && mineCol === col) ||\n          this.getCell(mineRow, mineCol).val === -1)\n\n        this.getCell(mineRow, mineCol).val = -1\n        this.mines.push(this.getCell(mineRow, mineCol))\n      }\n      // 初始化数字\n      this.initNum()\n      console.log('初始化地雷完成...')\n      console.log('-----------------------')\n      this.isFirstClick = false\n\n      this.cellMatrix.forEach((rowArr) => {\n        rowArr.forEach((cell) => {\n          if (cell.val === -1) {\n            cell.neighbors.forEach((neighbor) => {\n              if (neighbor.val !== -1) {\n                neighbor.val++\n              }\n            })\n          }\n        })\n      })\n      this.isFirstClick = false\n    },\n\n    /**\n     * @description 初始化数字\n     */\n    initNum () {\n      console.log('初始化数字...')\n\n      this.cellMatrix.forEach((rowArr) => {\n        rowArr.forEach((cell) => {\n          if (cell.val === -1) {\n            cell.neighbors.forEach((neighbor) => {\n              if (neighbor.val !== -1) {\n                neighbor.val++\n              }\n            })\n          }\n        })\n      })\n    },\n\n    /**\n     * @description 插旗\n     */\n    setFlag (cell) {\n      cell.isFlagged = !cell.isFlagged\n      if (cell.isFlagged) {\n        this.remainMines--\n      } else {\n        this.remainMines++\n      }\n    },\n    /**\n     * @description 计时开始\n     */\n    timeStart () {\n      this.timer = setInterval(() => {\n        this.time += 0.1\n      }, 100)\n    },\n\n    /**\n     * @description 计时停止\n     */\n    timeStop () {\n      clearInterval(this.timer)\n    },\n    /**\n     * @description 选择难度\n     */\n    changeDifficulty () {\n      switch (this.difficulty) {\n        case 'easy': {\n          this.rowSize = 8\n          this.colSize = 8\n          this.mineSize = 10\n          break\n        }\n        case 'normal': {\n          this.rowSize = 16\n          this.colSize = 16\n          this.mineSize = 40\n          break\n        }\n        case 'hard': {\n          this.rowSize = 16\n          this.colSize = 30\n          this.mineSize = 99\n          break\n        }\n      }\n      this.initGame()\n    },\n    mousedown (e, cell) {\n      if (e.button === 2) {\n        if (!cell.isVisited) this.setFlag(cell)\n        cell.isRightPress = true\n      } else if (e.button === 0) {\n        cell.isLeftPress = true\n        cell.isReady = true\n      }\n      // 同时按下\n      if (cell.isRightPress && cell.isLeftPress) {\n        cell.neighbors.forEach((neighbor) => {\n          if (!neighbor.isFlagged) neighbor.isReady = true\n        })\n        cell.isReady = true\n        return\n      }\n\n      // console.log(e.button);\n      this.emojiType = 'click'\n    },\n    mouseup (e, cell) {\n      this.emojiType = 'default'\n      // let clear = false\n\n      // 同时按下后，有一个松开\n      if (cell.isLeftPress && cell.isRightPress) {\n        if (cell.val > 0 && cell.isVisited) {\n          const unVisitedCells = []\n          let flags = 0\n\n          cell.neighbors.forEach((neighbor) => {\n            if (neighbor.isFlagged) {\n              // console.log(neighbor)\n              flags++\n            }\n            if (!neighbor.isVisited && !neighbor.isFlagged) {\n              unVisitedCells.push(neighbor)\n            }\n          })\n\n          const mines = []\n          if (flags === cell.val) {\n            unVisitedCells.forEach((c) => {\n              if (c.val === -1) {\n                mines.push(c)\n              } else {\n                this.clickCell(c)\n              }\n            })\n          }\n          if (mines.length > 0) {\n            mines.forEach((mine) => {\n              mine.isVisited = true\n              mine.isClickedBoom = true\n            })\n            this.fail()\n          }\n        }\n      }\n      cell.neighbors.forEach((neighbor) => {\n        neighbor.isReady = false\n      })\n\n      if (e.button === 2) {\n        cell.isRightPress = false\n      } else if (e.button === 0) {\n        cell.isLeftPress = false\n      }\n    },\n    mouseleave (cell) {\n      if (cell.isReady) {\n        cell.isReady = false\n      }\n    }\n  },\n  filters: {\n    /**\n     * @description  时间过滤\n     * @param val\n     * @returns {string}\n     */\n    timeFilter (val) {\n      return Number(val).toFixed(1)\n    },\n\n    /**\n     * @description 设置空格\n     * @param val 格子数字\n     * @returns {string|*}\n     */\n    cellFilter (val) {\n      return val === 0 ? '' : val\n    }\n  }\n\n}\n</script>\n\n<style>\n@import \"./assets/style/Index.css\";\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}